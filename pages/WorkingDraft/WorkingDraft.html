<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <title>WorkingDraft</title>
  </head>
  <body>
    <h4>PREFACE</h4>
    <p>[Note:&nbsp; this document is a work in progress] </p>
    <p>This document is intended to describe the various facets of Eamon
      CS.&nbsp; The real documentation will be a formal set:&nbsp; full source
      code commenting, a Player's Manual, a Dungeon Designer's Manual and a
      Class Reference.&nbsp; It will take quite a while to put all that
      together, so in the meantime, hopefully, this will suffice. </p>
    <p>Eamon CS (ECS) is a port of the Eamon roleplaying game to the C#
      programming language.&nbsp; It is the production version of a prior system
      called Eamon AC (EAC), an ANSI C prototype intended to extract Eamon out
      of BASIC.&nbsp; If you have EAC on your system, you should uninstall it
      before using ECS, as it is now obsolete.</p>
    <p>This system is a hybrid of Donald Brown's Classic Eamon and the most
      modern BASIC Eamon available, Frank Black Production's Eamon Deluxe.&nbsp;
      It is also directly based on the EAC prototype.&nbsp; Eamon CS borrows
      liberally from and bears a strong resemblance to all these sources in
      various areas.&nbsp;&nbsp; </p>
    <p>The game has evolved rapidly over its short lifespan.&nbsp; First, it
      moved to a plugin-based architecture unique to this branch of Eamon, then
      into the various flavors of Unix, and most recently into the Android
      mobile device space.&nbsp; The game engine has improved with each one of a
      small, but growing collection of custom-built adventures created along the
      way.&nbsp; The different facets of Eamon CS share a common code
      base.&nbsp; Where necessary it will be distinguished as Eamon CS Desktop
      for traditional workstations and Eamon CS Mobile for mobile devices. </p>
    <h4>PREREQUISITES</h4>
    <p>As mentioned in the README.md file, Eamon CS has no formal
      installer.&nbsp; There are good points and bad points to this.&nbsp; On
      the one hand, it is a simple matter of unzipping the Eamon-CS-master.zip
      file downloaded from GitHub to set up for play (if you did that, as
      opposed to doing a Git Clone).&nbsp; Also, it means there is no installer
      to maintain, which frees up time for other things like engine enhancements
      or developing adventures. </p>
    <p>A disadvantage to this approach is the ECS developer/gamer is responsible
      for installing all system prerequisites.&nbsp; Otherwise, ECS will not run
      when any of the .bat or .sh QuickLaunch files are double-clicked.&nbsp;
      Typically, this is manifested by a console window popping up and then
      disappearing quickly, caused by a missing dotnet.exe program.&nbsp; If you
      find that you cannot get Eamon CS to run on Windows, your first order of
      business should be to download and install the following files (in order):</p>
    <p>Programmers who want to play, step through, or develop the source code: </p>
    <p style="margin-left: 40px;"><a href="https://dotnet.microsoft.com/download/dotnet-framework/thank-you/net48-developer-pack-offline-installer">Microsoft
        .NET Framework 4.8 SDK</a></p>
    <div style="margin-left: 40px;"> </div>
    <p style="margin-left: 40px;"><a href="https://dotnet.microsoft.com/download/dotnet-core/thank-you/sdk-2.2.207-windows-x64-installer">Microsoft
        .NET Core 2.2 SDK</a></p>
    <div style="margin-left: 40px;"> </div>
    <p style="margin-left: 40px;"><a href="https://visualstudio.microsoft.com/thank-you-downloading-visual-studio/?sku=Community&amp;rel=16">Microsoft
        Visual Studio Community 2019 <br>
      </a></p>
    <div style="margin-left: 40px;"> </div>
    <ul style="margin-left: 40px;">
      <li>Installer option: .NET desktop development</li>
      <li>Installer option: Mobile development with .NET</li>
    </ul>
    <div style="margin-left: 40px;"> </div>
    <p>Gamers who want to play:</p>
    <p style="margin-left: 40px;"><a href="https://dotnet.microsoft.com/download/dotnet-framework/thank-you/net48-offline-installer">Microsoft
        .NET Framework 4.8</a></p>
    <p style="margin-left: 40px;"><a href="https://dotnet.microsoft.com/download/dotnet-core/thank-you/runtime-2.2.8-windows-x64-installer">Microsoft
        .NET Core 2.2</a></p>
    <div style="margin-left: 40px;"> </div>
    <p>Note:&nbsp; Eamon CS should be fully compatible with new versions of .NET
      Core.&nbsp; If you wish to run the system using a more recent version of
      .NET Core, you must download VS 2019+ and recompile the Plugin Manager
      program to target it.&nbsp; The newer .NET Core must also be installed on
      your system.&nbsp; See the Post-Installation Topics section for more
      details. </p>
    <p>A second disadvantage on Windows leads to a useful tip regarding the
      downloaded .zip file.&nbsp; You should always right-click on the .zip file
      and select "unblock" to avoid the security warnings, as shown below:</p>
    <br>
    <div style="text-align: center;"><img style="width: 50%; height: auto;" title="UnblockECS.jpg"

        alt="UnblockECS.jpg" src="../../assets/images/WorkingDraft/UnblockECS.jpg">
    </div>
    <br>
    <br>
    <div style="text-align: center;"><img style="width: 22%; height: auto;" title="UnblockECS02.jpg"

        alt="UnblockECS02.jpg" src="../../assets/images/WorkingDraft/UnblockECS02.jpg">
    </div>
    <br>
    <p>The prerequisites on Unix are similar: a version of Mono that is .NET
      Framework 4.7.2+ and .NET Core 2.X compatible. The means to satisfy these
      requirements vary from platform to platform. Eamon CS on Unix should only
      be pursued by those who are confident enough to see it through via their
      own devices. The game runs correctly on Ubuntu Linux and FreeBSD, and may
      also work on other Unix variants. However, due to input-related issues, OS
      X requires a formal port to be done.</p>
    <h4>POST-INSTALLATION TOPICS</h4>
    <p>The binaries for Eamon CS are compiled to use .NET Core 2.X, but the
      system should be fully compatible with new versions of .NET Core that
      conform to .NET Standard 2.0.&nbsp; If you have a newer version of .NET
      Core on your system and don't want to download 2.X, you can recompile the
      EamonPM.WindowsUnix project to target it.&nbsp; To do this, you must first
      install Visual Studio 2019+, as described in the Prerequisites
      section.&nbsp; The use of Visual Studio is described in the section called
      Using The Visual Studio Debugger.&nbsp; The following screenshot shows how
      to determine which versions of .NET Core are present on your system:</p>
    <br>
    <div style="text-align: center;"><img style="width: 50%; height: auto;" title="IncompatibleNetCoreError.jpg"

        alt="IncompatibleNetCoreError.jpg" src="../../assets/images/WorkingDraft/IncompatibleNetCoreError.jpg">
    </div>
    <br>
    <p>To recompile the EamonPM.WindowsUnix project, load the Eamon.Desktop
      solution in Visual Studio.&nbsp; Right-click on the project and choose
      Properties.&nbsp; Select the appropriate version of .NET Core in the
      Target Framework drop-down list on the Application tab, then click the
      Save button:</p>
    <br>
    <div style="text-align: center;"><img style="width: 50%; height: auto;" title="CompileForNetCore3Plus.jpg"

        alt="CompileForNetCore3Plus.jpg" src="../../assets/images/WorkingDraft/CompileForNetCore3Plus.jpg">
    </div>
    <br>
    <p>After doing this, right-click on the EamonPM.WindowsUnix project and
      choose Clean.&nbsp; Then right-click on the project and select
      Build.&nbsp; If you receive no errors, Eamon CS should now work with your
      installed .NET Core.</p>
    <h4>PROGRAMS, LIBRARIES AND PLUGINS</h4>
    <p>The plugin-based architecture used by Eamon CS extends to the Main Hall,
      the Dungeon Designer, and all adventures.&nbsp; A Plugin Manager program
      specific to either Desktop or Mobile environments manages them:</p>
    <br>
    <table style="width: 50%;margin-left: auto;margin-right: auto;" border="1">
      <tbody>
        <tr>
          <td>System\Bin\EamonPM.WindowsUnix.dll</td>
          <td>Eamon CS Windows/Unix Plugin Manager</td>
        </tr>
        <tr>
          <td>System\Bin\EamonPM.Android-Signed.apk</td>
          <td>Eamon CS Android Plugin Manager</td>
        </tr>
        <tr>
          <td>System\Bin\EamonDD.dll</td>
          <td>Eamon CS Dungeon Designer Plugin</td>
        </tr>
        <tr>
          <td>System\Bin\EamonMH.dll</td>
          <td>Eamon CS Main Hall Plugin</td>
        </tr>
        <tr>
          <td>System\Bin\EamonRT.dll</td>
          <td>Eamon CS Adventure Plugin</td>
        </tr>
        <tr>
          <td>System\Bin\EamonVS.dll</td>
          <td>Eamon CS/Visual Studio Automation Library</td>
        </tr>
        <tr>
          <td>System\Bin\Eamon.dll</td>
          <td>Eamon CS Library</td>
        </tr>
        <tr>
          <td>System\Bin\Polenter.SharpSerializer.dll</td>
          <td>SharpSerializer.Library</td>
        </tr>
      </tbody>
    </table>
    <br>
    <p>Additionally, you have some adventures:</p>
    <br>
    <table style="width: 50%;margin-left: auto;margin-right: auto;" border="1">
      <tbody>
        <tr>
          <td>System\Bin\TheBeginnersCave.dll<br>
          </td>
          <td>Eamon CS Adventure Plugin<br>
          </td>
        </tr>
        <tr>
          <td style="width: 331.95px;">System\Bin\BeginnersForest.dll<br>
          </td>
          <td style="width: 346.55px;">Eamon CS Adventure Plugin<br>
          </td>
        </tr>
        <tr>
          <td>System\Bin\TheTrainingGround.dll<br>
          </td>
          <td>Eamon CS Adventure Plugin<br>
          </td>
        </tr>
        <tr>
          <td>System\Bin\TheSubAquanLaboratory.dll<br>
          </td>
          <td>Eamon CS Adventure Plugin<br>
          </td>
        </tr>
        <tr>
          <td>System\Bin\ARuncibleCargo.dll<br>
          </td>
          <td>Eamon CS Adventure Plugin<br>
          </td>
        </tr>
        <tr>
          <td>System\Bin\StrongholdOfKahrDur.dll<br>
          </td>
          <td>Eamon CS Adventure Plugin<br>
          </td>
        </tr>
        <tr>
          <td>System\Bin\TheTempleOfNgurct.dll<br>
          </td>
          <td>Eamon CS Adventure Plugin<br>
          </td>
        </tr>
        <tr>
          <td>System\Bin\WrenholdsSecretVigil.dll<br>
          </td>
          <td>Eamon CS Adventure Plugin<br>
          </td>
        </tr>
        <tr>
          <td>System\Bin\ TheVileGrimoireOfJaldial.dll<br>
          </td>
          <td>Eamon CS Adventure Plugin<br>
          </td>
        </tr>
        <tr>
          <td>System\Bin\ LandOfTheMountainKing.dll<br>
          </td>
          <td>Eamon CS Adventure Plugin<br>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
    <p>Conceptually, each plugin is a discrete program.&nbsp; It exposes a
      Program class with a Main method that takes a collection of arguments,
      much like any C-based program.&nbsp; The difference is that the Plugin
      Manager is what "executes" the plugin, not the calling C#
      environment.&nbsp; At the bottom of the software stack, you have
      Polenter.SharpSerializer.dll which handles loading and saving of the
      game's textfiles and Eamon.dll which holds code common to all ECS
      plugins.&nbsp; EamonRT.dll contains the vanilla game engine used by all
      non-customized adventures.&nbsp; For customized adventures, the game
      plugin (e.g., TheBeginnersCave.dll) contains custom code specific to that
      game, built by leveraging EamonRT.dll.&nbsp; It is a "modded" version of
      the game engine.</p>
    <p>Plugins can share any logic with this implementation.&nbsp; For example,
      an interesting idea would be to create a "campaign library" that contains
      shared code for many derived adventures.</p>
    <p>The source code for Plugin Managers and system plugins resides in the
      appropriate directory under System; for adventures, it is in the
      adventure-specific directory under Adventures.</p>
    <p>The Main Hall textfiles reside in System\Bin, making them easily
      accessible to all plugins.&nbsp; Game-specific textfiles (both original
      and save game) reside under Adventures in their respective game
      directories.</p>
    <p>Here is a final note on the architectural differences between ECS Desktop
      and Mobile.&nbsp; For Desktop, the plugins reside in the System\Bin
      directory and are loaded by EamonPM.WindowsUnix.dll only when needed (and
      reused once loaded).&nbsp; In contrast, when building
      EamonPM.Android-Signed.apk, all plugins are statically linked in, and all
      textfiles are embedded, producing a monolithic application.&nbsp; When
      delivering the .apk onto the mobile device, the textfiles copy (when
      appropriate) to the device's file system - the plugins remain part of the
      application.&nbsp; In spite of this, the plugin managers are very similar
      internally.</p>
    <h4>BATCH FILES</h4>
    <p>The plugins take a variety of command-line parameters (described below).
      However, to get you up and running quickly, there is a QuickLaunch folder.
      (Since there is no formal ECS installer, you may want to create a shortcut
      to it on your desktop manually). Inside this folder is a set of batch
      files that you can run directly. The batch files organize into sub-folders
      based on the underlying plugin they invoke:</p>
    <br>
    <table style="width: 50%;margin-left: auto;margin-right: auto;" border="1">
      <tbody>
        <tr>
          <td>EamonDD\EditAdventures.bat</td>
          <td>Edit the flat Adventures database</td>
        </tr>
        <tr>
          <td>EamonDD\EditCatalog.bat</td>
          <td>Edit the adventure category Catalog</td>
        </tr>
        <tr>
          <td>EamonDD\EditCharacters.bat</td>
          <td>Edit the Characters file</td>
        </tr>
        <tr>
          <td>EamonDD\EditContemporary.bat</td>
          <td>Edit the Contemporary adventures category</td>
        </tr>
        <tr>
          <td>EamonDD\EditFantasy.bat</td>
          <td>Edit the Fantasy adventures category</td>
        </tr>
        <tr>
          <td>EamonDD\EditSciFi.bat</td>
          <td>Edit the Sci-Fi adventures category</td>
        </tr>
        <tr>
          <td>EamonDD\EditTest.bat</td>
          <td>Edit the Test adventures category</td>
        </tr>
        <tr>
          <td>EamonDD\EditWorkbench.bat</td>
          <td>Edit the Developer's Workbench</td>
        </tr>
        <tr>
          <td>EamonDD\EditWorkInProgress.bat</td>
          <td>Edit the Work-In-Progress adventures category</td>
        </tr>
        <tr>
          <td>EamonDD\EditARuncibleCargo.bat</td>
          <td>Edit A Runcible Cargo</td>
        </tr>
        <tr>
          <td>EamonDD\EditBeginnersForest.bat</td>
          <td>Edit Beginner's Forest</td>
        </tr>
        <tr>
          <td>EamonDD\Edit[AdventureName].bat</td>
          <td>Edit [AdventureName]</td>
        </tr>
        <tr>
          <td>EamonDD\LoadAdventureSupportMenu.bat</td>
          <td>Load Adventure Support Menu</td>
        </tr>
        <tr>
          <td>EamonMH\EnterMainHallUsingAdventures.bat</td>
          <td>Enter the Main Hall using a flat adventure database<sup>1</sup></td>
        </tr>
        <tr>
          <td>EamonMH\EnterMainHallUsingCatalog.bat</td>
          <td>Enter the Main Hall using a hierarchical adventure database<sup>1</sup></td>
        </tr>
        <tr>
          <td>EamonRT\ResumeARuncibleCargo.bat</td>
          <td>Resume A Runcible Cargo<sup>2</sup></td>
        </tr>
        <tr>
          <td>EamonRT\ResumeBeginnersForest.bat</td>
          <td>Resume Beginner's Forest<sup>2</sup></td>
        </tr>
        <tr>
          <td>EamonRT\Resume[AdventureName].bat</td>
          <td>Resume [AdventureName]<sup>2</sup></td>
        </tr>
      </tbody>
    </table>
    <br>
    <p><sup>1</sup> Run these batch files to create a new character or send an
      existing one into the Main Hall. The only difference between the two batch
      files is the nature of the adventure database loaded (the same characters
      will be available regardless).</p>
    <p><sup>2</sup> Run these batch files to return to an in-progress adventure.
      Use the RESTORE command to pick up where you left off.</p>
    <p>You can study the batch files to see how the system launches various
      programs. You can also create new batch files using these as templates if
      you decide to write adventures or run the system in a non-default manner.</p>
    <p>Eamon CS Mobile mirrors this QuickLaunch hierarchy using a series of
      ListViews to provide a similar experience.</p>
    <br>
  </body>
</html>
